<!doctype html>
<html>
	<head>
	</head>

	<body>
		<textarea id="input"></textarea>

		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.4.4/socket.io.min.js"></script>

		<script type="text/javascript">
			var client_id = localStorage.getItem('client_id');

			if (!client_id) {
				client_id = uuid();
				localStorage.setItem('client_id', client_id);
			}

			var socket = io('http://localhost:3000/');

			socket.emit('join', { 'room': client_id });

			socket.on('message', function (data) {
				console.log(data);
			});

			$('#input').on('keypress', function (event) {
				if (event['which'] === 13) {
					var value = $(this).val();
					socket.emit('message', { 'room': 'agents', 'message': value });
				}
			});
		</script>
	</body>
</html>